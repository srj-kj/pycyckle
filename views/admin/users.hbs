<section class="content-main">
    <div class="content-header">
        <div>
            <h2 class="content-title card-title">User Management</h2>
            </h2>
            <p>User Details is here</p>
        </div>
    </div>
    <div class="row container">
        <div class="col-md-12">
            <div class="card mb-4">
                <header class="card-header">
                    <div class="row gx-3">
                        <div class="col-lg-4 col-md-6 me-auto">
                            <input type="text" placeholder="Search..." class="form-control">
                        </div>
                        <div class="col-lg-2 col-md-3 col-6">
                            <select class="form-select">
                                <option>Status</option>
                                <option>Active</option>
                                <option>Disabled</option>
                                <option>Show all</option>
                            </select>
                        </div>
                        <div class="col-lg-2 col-md-3 col-6">
                            <select class="form-select">
                                <option>Show 20</option>
                                <option>Show 30</option>
                                <option>Show 40</option>
                            </select>
                        </div>
                    </div>
                </header> <!-- card-header end// -->
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th scope="col">Sl.No</th>
                                    <th scope="col">Name</th>
                                    <th scope="col">Email</th>
                                    <th scope="col">Phone</th>
                                    <th scope="col">Status</th>
                                    <th scope="col">Action</th>
                                </tr>
                            </thead>

                            <tbody>
                                {{#each users}}
                                <tr>
                                    <td>{{inc @index}}</td>
                                    <td>
                                    <h6>{{this.name}}</h6>
                                    </td>
                                    <td>{{this.email}}</td>
                                    <td>{{this.phone}}</td>

                                    {{#if this.isBlocked}}
                                    <td><span class="badge badge-pill badge-soft-danger">Disabled</span></td>
                                    {{else}}
                                    <td><span class="badge badge-pill badge-soft-success">Active</span></td>
                                    {{/if}}



                                    <td>
                                        {{#if this.isBlocked}}
                                        <button 
                                            onclick=" unblockUser('{{this._id}}')"
                                            class="btn btn-success btn-sm">Unblock</button>
                                        {{else}}
                                        <button 
                                            onclick=" blockUser('{{this._id}}')"
                                            class="btn btn-danger btn-sm">Block</button>
                                        {{/if}}
                                    </td>
                                </tr>
                                {{/each}}

                            </tbody>
                        </table>
                    </div> <!-- table-responsive //end -->
                </div> <!-- card-body end// -->
            </div> <!-- card end// -->
        </div>

    </div>
    
</section>


<script>

function unblockUser(userId){
    Swal.fire({
  title: 'Are you sure?',
  text: "You won't be able to revert this!",
  icon: 'warning',
  showCancelButton: true,
  confirmButtonColor: '#3085d6',
  cancelButtonColor: '#d33',
  confirmButtonText: 'Yes, unblock the user!'
}).then((result) => {
  if (result.isConfirmed) {
    Swal.fire(
      'Unblocked!',
      'user has been unblocked.',
      'success'
     
    )
    window.location.href ="/admin/unblock-user/"+userId
  }
})
}

</script>

<script>

function blockUser(userId){
    Swal.fire({
  title: 'Are you sure?',
  text: "You won't be able to revert this!",
  icon: 'warning',
  showCancelButton: true,
  confirmButtonColor: '#3085d6',
  cancelButtonColor: '#d33',
  confirmButtonText: 'Yes, Block the user!'
}).then((result) => {
  if (result.isConfirmed) {
    Swal.fire(
      'blocked!',
      'User has been Blocked.',
      'success'
     
    )
    window.location.href ="/admin/block-user/"+userId
  }
})
}

</script>



<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>